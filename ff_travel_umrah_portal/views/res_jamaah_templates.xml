<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <template id="my_jamaah_link" name="Link to list jamaah in portal" inherit_id="portal.user_dropdown">
        <xpath expr="//*[@id='o_logout_divider']" position="before">
            <div id="o_jamaah_divider" class="dropdown-divider"/>
            <a href="/my/jamaah" role="menuitem" class="dropdown-item">Jamaah</a>
        </xpath>
    </template>

    <template id="jamaah_list_kanban" name="Kanban jamaah">
        <div t-attf-class="card">
            <div class='card-body' style='min-height: 70px;'>
                <form action="/my/jamaah/register" method="POST">
                    <input type="hidden" name="contact_id" t-att-value="contact.id" />
                    <button type="submit" class="btn btn-link float-right p-0 no-decoration" title="Edit this jamaah" aria-label="Edit this jamaah">
                        <i class='fa fa-edit' />
                    </button>
                </form>
                <form action="/my/jamaah/delete" method="POST">
                    <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()" />
                    <input type="hidden" name="contact_id" t-att-value="contact.id" />
                    <button type="submit" class="btn btn-link float-right p-0 no-decoration" title="Delete this jamaah" aria-label="Delete this jamaah">
                        <i class='fa fa-close' />
                    </button>
                </form>
                <t t-esc="contact" t-options="dict(widget='contact', fields=['name', 'ktp_no', 'phone', 'mobile'], no_marker=False)" />
            </div>
        </div>
    </template>

    <template id="jamaah_list" name="Jamaah List">
        <t t-set="no_footer" t-value="1" />
        <t t-call="website.layout">
            <div id="wrap">
                <div class="container oe_website_sale py-2">
                    <div class="col">
                        <div class="col-md-8">
                            <h4 class="o_page_header mt8">
                                List Jamaah
                            </h4>
                        </div>
                        <div>
                            <t t-foreach="child_ids" t-as="contact">
                                <div class="col-md-8 one_kanban">
                                    <t t-call="ff_travel_umrah_portal.jamaah_list_kanban">
                                        <t t-set='contact' t-value="contact" />
                                    </t>
                                </div>
                            </t>
                        </div>
                        <form action="/shop/jamaah/register" method="POST">
                            <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()" />
                            <button type="submit" class="btn btn-secondary float-left mt-2 ml-3">
                                <span class="fa fa-plus-square" />
 New</button>
                        </form>
                    </div>
                </div>
            </div>
        </t>
    </template>

    <template id="jamaah_form" name="Jamaah Form">
        <t t-set="no_footer" t-value="1" />
        <t t-call="website.layout">
            <div id="wrap">
                <div class="container oe_website_sale py-2">
                    <div class="row">
                        <div class="col-12 col-xl order-xl-1 oe_cart">
                            <h2 class="o_page_header mt8">Jamaah Information</h2>
                            <form method="post" class="checkout_autoformat">
                                <div class="form-row">
                                    <div t-attf-class="form-group #{error.get('name') and 'o_has_error' or ''} col-md-8 div_name">
                                        <label class="col-form-label" for="name">Name</label>
                                        <input id="name" type="text" class="form-control o_website_form_input" name="name" required="" t-att-value="'name' in jamaah and jamaah['name']" />
                                    </div>
                                    <div class="w-100" />
                                    <div t-attf-class="form-group #{error.get('ktp_no') and 'o_has_error' or ''} col-md-8 div_ktp_no">
                                        <label class="col-form-label" for="ktp_no">KTP No</label>
                                        <input id="ktp_no" type="number" class="form-control" name="ktp_no" required="" t-att-value="'ktp_no' in jamaah and jamaah['ktp_no']" />
                                    </div>
                                    <div class="w-100" />
                                    <div t-attf-class="form-group #{error.get('place_birth') and 'o_has_error' or ''} col-md-8 div_place_birth">
                                        <label class="col-form-label" for="place_birth">Place of
                                            Birth </label>
                                        <input id="place_birth" type="text" class="form-control" name="place_birth" required="" t-att-value="'place_birth' in jamaah and jamaah['place_birth']" />
                                    </div>
                                    <div class="w-100" />
                                    <div t-attf-class="form-group #{error.get('date_birth') and 'o_has_error' or ''} col-md-8 div_date_birth">
                                        <label class="col-form-label" for="date_birth">Date of
                                            Birth </label>
                                        <input id="date_birth" type="date" class="form-control" name="date_birth" required="" t-att-value="'date_birth' in jamaah and jamaah['date_birth']" />
                                    </div>
                                    <div class="w-100" />
                                    <div t-attf-class="form-group #{error.get('street') and 'o_has_error' or ''} col-md-8 div_street">
                                        <label class="col-form-label" for="street">Street <span class="d-none d-md-inline"> and Number</span>
                                        </label>
                                        <input type="text" name="street" t-attf-class="form-control #{error.get('street') and 'is-invalid' or ''}" t-att-value="'street' in jamaah and jamaah['street']" />
                                    </div>
                                    <div class="w-100" />
                                    <div t-attf-class="form-group #{error.get('street2') and 'o_has_error' or ''} col-md-8 div_street2">
                                        <label class="col-form-label label-optional" for="street2">Street 2</label>
                                        <input type="text" name="street2" t-attf-class="form-control #{error.get('street2') and 'is-invalid' or ''}" t-att-value="'street2' in jamaah and jamaah['street2']" />
                                    </div>
                                    <div class="w-100" />
                                    <div t-attf-class="form-group #{error.get('city') and 'o_has_error' or ''} col-md-8 div_city">
                                        <label class="col-form-label" for="city">City</label>
                                        <input type="text" name="city" t-attf-class="form-control #{error.get('city') and 'is-invalid' or ''}" t-att-value="'city' in jamaah and jamaah['city']" />
                                    </div>
                                    <t t-set='zip_city' t-value='country and [x for x in country.get_address_fields() if x in ["zip", "city"]] or ["city", "zip"]' />
                                    <t t-if="'zip' in zip_city and zip_city.index('zip') &lt; zip_city.index('city')">
                                        <div t-attf-class="form-group #{error.get('zip') and 'o_has_error' or ''} col-md-4 div_zip">
                                            <label class="col-form-label label-optional" for="zip">Zip Code</label>
                                            <input type="number" name="zip" t-attf-class="form-control #{error.get('zip') and 'is-invalid' or ''}" t-att-value="'zip' in jamaah and jamaah['zip']" />
                                        </div>
                                    </t>
                                    <div class="w-100" />
                                    <div t-attf-class="form-group #{error.get('phone') and 'o_has_error' or ''} col-md-8" id="div_phone">
                                        <label class="col-form-label" for="phone">Phone</label>
                                        <input type="tel" name="phone" t-attf-class="form-control #{error.get('phone') and 'is-invalid' or ''}" t-att-value="'phone' in jamaah and jamaah['phone']" />
                                    </div>
                                    <div class="w-100" />
                                    <div t-attf-class="form-group #{error.get('mobile') and 'o_has_error' or ''} col-md-8" id="div_mobile">
                                        <label class="col-form-label" for="mobile">Mobile</label>
                                        <input type="tel" name="mobile" t-attf-class="form-control #{error.get('mobile') and 'is-invalid' or ''}" t-att-value="'mobile' in jamaah and jamaah['mobile']" />
                                    </div>
                                    <div class="w-100" />
                                    <div t-attf-class="form-group #{error.get('email') and 'o_has_error' or ''} col-md-8" id="div_email">
                                        <label class="col-form-label" for="email">Email</label>
                                        <input type="email" name="email" t-attf-class="form-control #{error.get('email') and 'is-invalid' or ''}" t-att-value="'email' in jamaah and jamaah['email']" />
                                    </div>
                                    <div class="w-100" />
                                    <div t-attf-class="form-group #{error.get('title_id') and 'o_has_error' or ''} col-md-8" id="div_title">
                                        <label class="col-form-label" for="title_id">Title</label>
                                        <select id="title_id" class="form-control">
                                            <option value="" selected="" disabled="">Title</option>
                                            <t t-foreach="title_id" t-as="title">
                                                <option t-att-value="title.id">
                                                    <t t-esc="title.name" />
                                                </option>
                                            </t>
                                        </select>
                                    </div>
                                    <div class="w-100" />
                                    <div t-attf-class="form-group #{error.get('father_name') and 'o_has_error' or ''} col-md-8" id="div_father_name">
                                        <label class="col-form-label" for="father_name">Father's
                                            Name</label>
                                        <input type="text" name="father_name" t-attf-class="form-control #{error.get('father_name') and 'is-invalid' or ''}" t-att-value="'father_name' in jamaah and jamaah['father_name']" />
                                    </div>
                                    <div class="w-100" />
                                    <div t-attf-class="form-group #{error.get('mother_name') and 'o_has_error' or ''} col-md-8" id="div_mother_name">
                                        <label class="col-form-label" for="mother_name">Mother's
                                            Name</label>
                                        <input type="text" name="mother_name" t-attf-class="form-control #{error.get('mother_name') and 'is-invalid' or ''}" t-att-value="'mother_name' in jamaah and jamaah['mother_name']" />
                                    </div>
                                    <div class="w-100" />
                                    <div t-attf-class="form-group #{error.get('job') and 'o_has_error' or ''} col-md-8" id="div_job">
                                        <label class="col-form-label" for="job">Job</label>
                                        <input type="text" name="job" t-attf-class="form-control #{error.get('job') and 'is-invalid' or ''}" t-att-value="'job' in jamaah and jamaah['job']" />
                                    </div>
                                    <div class="w-100" />
                                    <div t-attf-class="form-group #{error.get('blood_type') and 'o_has_error' or ''} col-md-8" id="div_blood_type">
                                        <label class="col-form-label" for="blood_type">Blood
                                            Type</label>
                                        <select id="blood_type" class="form-control">
                                            <option value="" selected="" disabled="">Blood Type</option>
                                            <t t-foreach="blood_type" t-as="type">
                                                <option t-att-value="type[0]">
                                                    <t t-esc="type[1]" />
                                                </option>
                                            </t>
                                        </select>
                                    </div>
                                    <div class="w-100" />
                                    <div t-attf-class="form-group #{error.get('gender') and 'o_has_error' or ''} col-md-8" id="div_gender">
                                        <label class="col-form-label" for="gender">Gender</label>
                                        <select id="gender" class="form-control">
                                            <option value="" selected="" disabled="">Gender</option>
                                            <t t-foreach="gender" t-as="gen">
                                                <option t-att-value="gen[0]">
                                                    <t t-esc="gen[1]" />
                                                </option>
                                            </t>
                                        </select>
                                    </div>
                                    <div class="w-100" />
                                    <div t-attf-class="form-group #{error.get('marital_status_id') and 'o_has_error' or ''} col-md-8" id="div_marital_status">
                                        <label class="col-form-label" for="marital_status_id">Marital
                                            Status</label>
                                        <select id="marital_status_id" class="form-control">
                                            <option value="" selected="" disabled="">Marital
                                                Status</option>
                                            <t t-foreach="marital_status_id" t-as="status">
                                                <option t-att-value="status.id">
                                                    <t t-esc="status.name" />
                                                </option>
                                            </t>
                                        </select>
                                    </div>
                                    <div class="w-100" />
                                    <div t-attf-class="form-group #{error.get('education_id') and 'o_has_error' or ''} col-md-8" id="div_education">
                                        <label class="col-form-label" for="education_id">Education</label>
                                        <select id="education_id" class="form-control">
                                            <option value="" selected="" disabled="">Education</option>
                                            <t t-foreach="education_id" t-as="education">
                                                <option t-att-value="education.id">
                                                    <t t-esc="education.name" />
                                                </option>
                                            </t>
                                        </select>
                                    </div>
                                    <div class="w-100" />
                                    <div t-attf-class="form-group #{error.get('clothes_size_id') and 'o_has_error' or ''} col-md-8" id="div_clothes_size">
                                        <label class="col-form-label" for="clothes_size_id">Clothes
                                            Size</label>
                                        <select id="clothes_size_id" class="form-control">
                                            <option value="" selected="" disabled="">Clothes
                                                Size</option>
                                            <t t-foreach="clothes_size_id" t-as="size">
                                                <option t-att-value="size.id">
                                                    <t t-esc="size.name" />
                                                </option>
                                            </t>
                                        </select>
                                    </div>
                                    <div class="w-100" />
                                    <div t-attf-class="form-group #{error.get('pass_no') and 'o_has_error' or ''} col-md-8" id="div_pass_no">
                                        <label class="col-form-label" for="pass_no">Passport No</label>
                                        <input type="text" name="pass_no" t-attf-class="form-control #{error.get('pass_no') and 'is-invalid' or ''}" t-att-value="'pass_no' in jamaah and jamaah['pass_no']" />
                                    </div>
                                    <div class="w-100" />
                                    <div t-attf-class="form-group #{error.get('pass_name') and 'o_has_error' or ''} col-md-8" id="div_pass_name">
                                        <label class="col-form-label" for="pass_name">Passport
                                            Name</label>
                                        <input type="text" name="pass_name" t-attf-class="form-control #{error.get('pass_name') and 'is-invalid' or ''}" t-att-value="'pass_name' in jamaah and jamaah['pass_name']" />
                                    </div>
                                    <div class="w-100" />
                                    <div t-attf-class="form-group #{error.get('date_isue') and 'o_has_error' or ''} col-md-8" id="div_date_issue">
                                        <label class="col-form-label" for="date_isue">Date
                                            Issued</label>
                                        <input type="date" name="date_isue" t-attf-class="form-control #{error.get('date_isue') and 'is-invalid' or ''}" t-att-value="'date_isue' in jamaah and jamaah['date_isue']" />
                                    </div>
                                    <div class="w-100" />
                                    <div t-attf-class="form-group #{error.get('date_exp') and 'o_has_error' or ''} col-md-8" id="div_date_exp">
                                        <label class="col-form-label" for="date_exp">Date of
                                            Expiry</label>
                                        <input type="date" name="date_exp" t-attf-class="form-control #{error.get('date_exp') and 'is-invalid' or ''}" t-att-value="'date_exp' in jamaah and jamaah['date_exp']" />
                                    </div>
                                    <div class="w-100" />
                                    <div t-attf-class="form-group #{error.get('imigrasi') and 'o_has_error' or ''} col-md-8" id="div_imigrasi">
                                        <label class="col-form-label" for="imigrasi">Imigrasi</label>
                                        <input type="text" name="imigrasi" t-attf-class="form-control #{error.get('imigrasi') and 'is-invalid' or ''}" t-att-value="'imigrasi' in jamaah and jamaah['imigrasi']" />
                                    </div>

                                </div>


                                <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()" />
                                <input type="hidden" name="partner_id" t-att-value="partner_id or '0'" />
                                <input type="hidden" name="field_required" t-att-value="'phone,name'" />
                                <div class="d-flex justify-content-between">
                                    <button type="submit" href="/shop/jamaah/register/add" class="btn btn-primary btn-lg">Submit</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </t>
    </template>

</odoo>
